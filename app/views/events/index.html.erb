<div class="page-content">
  <div class="container">
    <div class="row">
      <main class="col-md-9">
        <%= render "knowledges/show_header" %>
        <section class="knowledge-event">
          <% @group_events.each do |day, events| %>
            <% if current_days.exclude?(day.to_s)%>
              <div class="row">
                <div class="col-md-12 col-lg-12 text-center">
                  <div class="owner">
                    <h4><%= day %></h4>
                    <% current_days << day %>
                  </div>
                </div>
              </div>
            <% end %>
            <% events.group_by{|e| e.ownerable.title}.each do |event_owner, new_events| %>
              <% if current_days.exclude?(day.to_s) or current_owners.exclude?(event_owner.to_s)%>
                <div class="row">
                  <div class="col-md-12 col-lg-12 text-center">
                    <div class="owner">
                      <% current_owners << event_owner %>
                    </div>
                  </div>
                </div>
              <% end %>
              <% new_events.each do |event| %>
                <table class="table" style="padding-left:30px;">
                  <tr>
                    <!-- <span><%#= render_created_at(event.created_at) %></span> -->
                    <td>
                      <%= link_to display_avatar(event.creator, "25x25"), user_path(event.creator) %>
                      <!-- <span><%#= render_creator_name(event) %></span> -->
                      <%= event.action %> :
                      <%= render_event_action(event) %>
                    </td>
                  </tr>
                </table>
              <% end %>
            <% end %>
          <% end %>

        </section>
      </main>
      <aside class="col-md-3">
        <%= render 'knowledges/sidebar' %>
      </aside>
    </div>
  </div>
</div>

<%= content_for :page_javascript do %>
  <script>
    $("#knowledge-event").addClass("active");
  </script>
<% end %>
